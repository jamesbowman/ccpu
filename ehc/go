PORT=/dev/tty.usbserial-000013FA
PORT=/dev/ttyUSB1

export PYTHONPATH=../src
# python unit.py $PORT || exit

/data/pdp11/local/bin/pdp11-aout-gcc -S -O9 -fomit-frame-pointer fib.c &&
python cook.py &&
(cd ../src; python memload.py $PORT ../ehc/ram ) &&
python ../src/asm.py $PORT ehc.ga ; exit
exit

# python asm.py $PORT helloworld.ga ; exit
# python asm.py $PORT fibonacci.ga ; exit
# python asm.py $PORT mathdemo.ga ; exit
# python asm.py $PORT vga.ga ; exit

export PATH=data/pdp11/local/bin:$PATH
make || exit
# exit
python mkpdp.py $PORT ; exit

# python asm.py $PORT memwrite.ga

# python ccasm.py counting.cc > lst || exit
# exit
# python memload.py /dev/ttyUSB0 bin || exit
# python asm.py /dev/ttyUSB0 ccpu.ga

# python asm.py /dev/ttyUSB0 memread.ga
# python draw.py && qiv out.png
